{"componentChunkName":"component---theme-src-templates-post-template-jsx","path":"/post/deploy-flarumchina-with-docker/","result":{"data":{"markdownRemark":{"html":"<h2 id=\"前期准备\" style=\"position:relative;\"><a href=\"#%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87\" aria-label=\"前期准备 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>前期准备</h2>\n<p>服务器安装 Docker 和 Docker Compose</p>\n<p>参考教程：\n<a href=\"http://get.daocloud.io/#install-docker\">http://get.daocloud.io/#install-docker</a></p>\n<p>没有服务器的可以在本地安装 Docker 或使用 DaoCloud 的胶囊主机, 能免费体验 120 分钟，足够学习使用</p>\n<p>路径：自有主机 -> 集群管理 -> 添加主机</p>\n<!-- {% imgurl 'deploy-flarumChina-with-docker/pic01.png' alt:'深度截图_选择区域_20170807083400' %} -->\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 812px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/7c2d77b8e89cbef6b1236d62ccff8fa9/63ec5/pic01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.490566037735846%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABfklEQVQoz5WR3W7UQAyF9/0fgQskBJdIXPEISFBVSIsQUkvp7nYTyO4mm2T+Yo89Nk4oFYhyUeuLZzLRcU5OVpgzAEwTcCn6lAKkVVU3t5vt9ddvx1NLRDYL7co4IU1ACXKcMsxH9pDyfZGIYKYVAnTd2fkQYhxtidG23vsMUSjR5I1xHMN8OOPm7pkZM6+IeRhdP4xgd0ViSjaAiV6v9fkHfXmpry4l839s28JczFQmJi5mZp7C/KWRj3tZV/KpLmxpiIqhS5ff4t2+3u22V1fXVV0/OTBmaV3pggxJjkGPXh0osU6kKeuU543ZRvoLFkUTU9HqTPsOv5/x5ke4a/HkyCUaI/nEQ8hnBy5xQn0goppqTtu+J8M09u3h1N7Vx6rpbjb17f6wb/r6MLRDalp/6pOHEmeZGAHFrC2/ivTtZ3rxHi82lLD0gYfIYyoLHEyQ1boHecDBnP8iZnmzpmfv6GJbkCSA/vmGAI9g+nvbv3JfSkr5B3kcU1naPwEl9rXCXIF7UwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"深度截图_选择区域_20170807083400\"\n        title=\"深度截图_选择区域_20170807083400\"\n        src=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/7c2d77b8e89cbef6b1236d62ccff8fa9/63ec5/pic01.png\"\n        srcset=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/7c2d77b8e89cbef6b1236d62ccff8fa9/78e79/pic01.png 265w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/7c2d77b8e89cbef6b1236d62ccff8fa9/b6a9b/pic01.png 530w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/7c2d77b8e89cbef6b1236d62ccff8fa9/63ec5/pic01.png 812w\"\n        sizes=\"(max-width: 812px) 100vw, 812px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<!-- more -->\n<h2 id=\"安装-flarum\" style=\"position:relative;\"><a href=\"#%E5%AE%89%E8%A3%85-flarum\" aria-label=\"安装 flarum permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>安装 Flarum</h2>\n<p>我们使用到的镜像是 <a href=\"https://github.com/Raincal/docker-flarum-china\">raincal/docker-flarum-china</a></p>\n<h3 id=\"ports\" style=\"position:relative;\"><a href=\"#ports\" aria-label=\"ports permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ports</h3>\n<p><code class=\"language-text\">8888</code></p>\n<h3 id=\"volume\" style=\"position:relative;\"><a href=\"#volume\" aria-label=\"volume permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Volume</h3>\n<ul>\n<li>/flarum/app/assets : FlarumChina 资源目录</li>\n<li>/flarum/app/extensions : FlarumChina 插件目录</li>\n</ul>\n<h3 id=\"环境变量\" style=\"position:relative;\"><a href=\"#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F\" aria-label=\"环境变量 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>环境变量</h3>\n<table>\n<thead>\n<tr>\n<th>变量</th>\n<th>描述</th>\n<th>类型</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>UID</strong></td>\n<td>Flarum user id</td>\n<td><em>optional</em></td>\n<td>991</td>\n</tr>\n<tr>\n<td><strong>GID</strong></td>\n<td>Flarum group id</td>\n<td><em>optional</em></td>\n<td>991</td>\n</tr>\n<tr>\n<td><strong>DEBUG</strong></td>\n<td>Flarum debug mode</td>\n<td><em>optional</em></td>\n<td>false</td>\n</tr>\n<tr>\n<td><strong>FORUM_URL</strong></td>\n<td>Forum URL</td>\n<td><strong>required</strong></td>\n<td>none</td>\n</tr>\n<tr>\n<td><strong>DB_HOST</strong></td>\n<td>MariaDB instance ip/hostname</td>\n<td><em>optional</em></td>\n<td>mariadb</td>\n</tr>\n<tr>\n<td><strong>DB_USER</strong></td>\n<td>MariaDB database username</td>\n<td><em>optional</em></td>\n<td>flarum</td>\n</tr>\n<tr>\n<td><strong>DB_NAME</strong></td>\n<td>MariaDB database name</td>\n<td><em>optional</em></td>\n<td>flarum</td>\n</tr>\n<tr>\n<td><strong>DB_PASS</strong></td>\n<td>MariaDB database password</td>\n<td><strong>required</strong></td>\n<td>none</td>\n</tr>\n<tr>\n<td><strong>DB_PREF</strong></td>\n<td>Flarum tables prefix</td>\n<td><em>optional</em></td>\n<td>none</td>\n</tr>\n<tr>\n<td><strong>UPLOAD<em>MAX</em>SIZE</strong></td>\n<td>The maximum size of an uploaded file</td>\n<td><em>optional</em></td>\n<td>50M</td>\n</tr>\n<tr>\n<td><strong>MEMORY_LIMIT</strong></td>\n<td>maximum amount of memory used by php</td>\n<td><em>optional</em></td>\n<td>128M</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"编写-docker-composeyml-文件\" style=\"position:relative;\"><a href=\"#%E7%BC%96%E5%86%99-docker-composeyml-%E6%96%87%E4%BB%B6\" aria-label=\"编写 docker composeyml 文件 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>编写 docker-compose.yml 文件</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> flarum <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> flarum\n<span class=\"token function\">vi</span> docker-compose.yml</code></pre></div>\n<p>根据自身情况 修改</p>\n<p>FORUM_URL</p>\n<p>DB_PASS</p>\n<p>MYSQL<em>ROOT</em>PASSWORD</p>\n<p>MYSQL_PASSWORD</p>\n<p>等环境变量</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">flarum</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> raincal/docker<span class=\"token punctuation\">-</span>flarum<span class=\"token punctuation\">-</span>china<span class=\"token punctuation\">:</span>0.1.0<span class=\"token punctuation\">-</span>beta.7<span class=\"token punctuation\">-</span>stable\n  <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> flarum\n  <span class=\"token key atrule\">links</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> mariadb<span class=\"token punctuation\">:</span>mariadb\n  <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> FORUM_URL=https<span class=\"token punctuation\">:</span>//forum.domain.tld\n    <span class=\"token punctuation\">-</span> DB_PASS=123456\n  <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> /mnt/docker/flarum/assets<span class=\"token punctuation\">:</span>/flarum/app/assets\n    <span class=\"token punctuation\">-</span> /mnt/docker/flarum/extensions<span class=\"token punctuation\">:</span>/flarum/app/extensions\n\n<span class=\"token key atrule\">mariadb</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mariadb<span class=\"token punctuation\">:</span><span class=\"token number\">10.1</span>\n  <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> mariadb\n  <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> /mnt/docker/mysql/db<span class=\"token punctuation\">:</span>/var/lib/mysql\n  <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> MYSQL_ROOT_PASSWORD=123456\n    <span class=\"token punctuation\">-</span> MYSQL_DATABASE=flarum\n    <span class=\"token punctuation\">-</span> MYSQL_USER=flarum\n    <span class=\"token punctuation\">-</span> MYSQL_PASSWORD=123456\n\n<span class=\"token key atrule\">nginx</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> wonderfall/boring<span class=\"token punctuation\">-</span>nginx\n  <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> nginx\n  <span class=\"token key atrule\">links</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> flarum<span class=\"token punctuation\">:</span>flarum\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"80:8000\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"443:4430\"</span>\n  <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> /mnt/docker/nginx/sites<span class=\"token punctuation\">-</span>enabled<span class=\"token punctuation\">:</span>/sites<span class=\"token punctuation\">-</span>enabled\n    <span class=\"token punctuation\">-</span> /mnt/docker/nginx/conf<span class=\"token punctuation\">:</span>/conf.d\n    <span class=\"token punctuation\">-</span> /mnt/docker/nginx/log<span class=\"token punctuation\">:</span>/var/log/nginx\n    <span class=\"token punctuation\">-</span> /mnt/docker/nginx/certs<span class=\"token punctuation\">:</span>/certs</code></pre></div>\n<h3 id=\"启动应用\" style=\"position:relative;\"><a href=\"#%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8\" aria-label=\"启动应用 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>启动应用</h3>\n<p><code class=\"language-text\">docker-compose up -d</code></p>\n<p>若使用胶囊主机，可以到 自有主机 -> Stack -> 创建新 Stack</p>\n<!-- {% imgurl 'deploy-flarumChina-with-docker/pic02.png' alt:'深度截图_选择区域_20170807084450' %} -->\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1060px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/bd44e/pic02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.77358490566038%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA/UlEQVQoz2P4+fPnr1+//pMC/v2DIoZv374D+etWr05LSCwuyCvKzynIySrMzQaSORlpyCgvKyMpLmblsqVA9X///gWSDBBrS4qLGRgY+NjZGHADFhYWIJmRng5U/+fPH5Dm379BmmurKnjZWLRUFKXFhGXERSSFBYR4OAW42JGRCB83UHNFaTFCM8Tm0pISoAQb2Gz8NmdmZiA0Q6idu3ZXVdR0dXa2NDc31Nc3NgBRQ1NjIzJqaGgsLa9ctnwlOMz+gZ3989e/P//+kwUYPvz8+vLnh+8/fnz+/PXLl6/AwP8NBr9A4DcmgLgUqvns57vLXx7+8w8U9KQ6AADbAm0TYUBHPgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"深度截图_选择区域_20170807084450\"\n        title=\"深度截图_选择区域_20170807084450\"\n        src=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/77672/pic02.png\"\n        srcset=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/78e79/pic02.png 265w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/b6a9b/pic02.png 530w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/77672/pic02.png 1060w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/ce0a7/pic02.png 1590w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/bd44e/pic02.png 1643w\"\n        sizes=\"(max-width: 1060px) 100vw, 1060px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"设置-nginx-反向代理\" style=\"position:relative;\"><a href=\"#%E8%AE%BE%E7%BD%AE-nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86\" aria-label=\"设置 nginx 反向代理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>设置 nginx 反向代理</h3>\n<p>通过 ssh 连接到胶囊主机</p>\n<p><code class=\"language-text\">ssh ubuntu@52.80.37.119</code></p>\n<!-- {% imgurl 'deploy-flarumChina-with-docker/pic03.png' alt:'深度截图_选择区域_20170807093749' %} -->\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 554px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/fb85222819e683c9f0698f7068659400/04abd/pic03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABL0lEQVQY03WQPUvFMBSG+8+cxFlwchBBFxfd5OIgiOjuoIOLu5Mi/gDF3c1R0bZpkqZJmrRpe2+S4+kF8Qreh+ScM7wv5yMBAF8V+u7avT5hbUwtRMU5KwrCkbLUSsUI/5J4o7L9VXK0Qc937eNNF4ASwihL0y/GWJblWuslXkialwdxNckO1orjTTJZnwUwzljoF0VxTpgTF8ZIho+3dG+Fnm7Tsx1xeeg8ZHlGBRelkKKqhKhNrZTWtcb5cal+GH7N+O3zfXGypW4vYmta13HGtFRM8dRQpkXwAZaNDX+vYa0hJFfalG2X24baXjfedLFuelwe+0splcIgh6EfO0Pw4P0YAWRVvX98FlwqiUorBAr1dOZDQMmcsQ6YcfkkLoBm59raum46nunnQVzCN+6gvuRQYuSBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"深度截图_选择区域_20170807093749\"\n        title=\"深度截图_选择区域_20170807093749\"\n        src=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/fb85222819e683c9f0698f7068659400/04abd/pic03.png\"\n        srcset=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/fb85222819e683c9f0698f7068659400/78e79/pic03.png 265w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/fb85222819e683c9f0698f7068659400/b6a9b/pic03.png 530w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/fb85222819e683c9f0698f7068659400/04abd/pic03.png 554w\"\n        sizes=\"(max-width: 554px) 100vw, 554px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker <span class=\"token builtin class-name\">exec</span> -it nginx ngxproxy\n\nWelcome to ngxproxy utility.\nWe're about to create a new virtual <span class=\"token function\">host</span> <span class=\"token punctuation\">(</span>AKA server block<span class=\"token punctuation\">)</span>.\n\nName: flarum\nDomain: forum.domain.tld\nWebroot <span class=\"token punctuation\">(</span>default is /<span class=\"token punctuation\">)</span>:\nContainer: flarum\nPort <span class=\"token punctuation\">(</span>default is <span class=\"token number\">80</span><span class=\"token punctuation\">)</span>: <span class=\"token number\">8888</span>\nHTTPS <span class=\"token punctuation\">[</span>y/n<span class=\"token punctuation\">]</span>: n\nMax body size <span class=\"token keyword\">in</span> MB <span class=\"token punctuation\">(</span>integer/null<span class=\"token punctuation\">)</span>: <span class=\"token number\">50</span>\n\nDone<span class=\"token operator\">!</span> flarum.conf has been generated.\nReload nginx now? <span class=\"token punctuation\">[</span>y/n<span class=\"token punctuation\">]</span>: y\nnginx successfully reloaded.</code></pre></div>\n<p>完成后访问外网IP 52.80.37.119，本地环境的话访问 localhost 开始安装 flarum</p>\n<p><strong>管理员密码需要大于8位</strong></p>\n<!-- {% imgurl 'deploy-flarumChina-with-docker/pic04.png' alt:'screencapture-joudo-tk-1502095912645imgurl '\n\n{% imgurl 'deploy-flarumChina-with-docker/pic05.png' alt:'screencapture-54-222-128-207-1502096436141' %} -->\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 540px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/db1e01e4eeacaf107b21d5036725e6b6/07484/pic04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 174.71698113207546%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE6UlEQVRIx62WS28cRRDH90tw58pX4MARcYI7F+ACnCI+ARK5ROQSgiIEikRCHiY8EgiJvbv2xo5NUAh+JCEPxfEjXnu93ufsvHp6pufxz797dpe1vYlyYKSfarq6qrp6p6q3C+g/WZoYKf76Ge1j78ItfgOv/C3End8RN9bhz5+HO3kS3vR3cKdOwZ89C/lwbuibZZl5LwwDJrGR9oXj2HrnNdg/HIXz4zF4U6chFn5F58sP0Dn+IaxTR9D96lM0jrwJb/L00PdwwL4iqtVgz84hdS1ET1Yg5q7AL16Af/3sUHrXzkD+U0H0eLGfYXo44GhQ845Xe0Z9TECtGDJYLUm0JeI4hooTxP3xaJBBVqMcyvDgs16tY/nBGmqNDta36tiut8z7wDkbk63JUGcQJ2kumZHOKuE4kBEcT0CGCp6QBilDvY08w/5uMhUhi1WeYUplzxWwvQDNroN2z0OHaJ1DneX4aFBvbHwJ33WR9hpILNJr5rRrHO+ZjAv4P59MZ5g1EGfL5D65B0WiNJdSLSOMVxBEy4iSu2Z+PNp3BQlqKCRYQ5RdJSUoFOFFU2h7kxBxEbXmBDa2z2GT1NuXaFNERJuhHFIi1xDjof4oHlLskj1DRmDe65RN0jIyQyO3yepmbj97/RgOt8wXld1GmC6RRQTxIiRR2RJEdBuOuAUR3ubqS9QtUpKBHMI53OGWq3rL6wiz63DkDNywjK5fhiXKkOkMv+5lbO5MoGldoRNbLZvm1sYxQ6Zo85gBs2eMPs3Vb9JhzhCmcxzPMdsKZHKDhjfNWOFF3DRBE6zqgJtUlOCrWWZZQS+ooONVGHQW9dYVVOu/MPAMbWa52A3KcXAOZQZ8kmeot6IwP8xwNNODunHku6sgyVbzslH85HrbbliCQ2xZ5O9axm7rEqq7F7lt/fuUzU7Go+euM8NHKESxBVeuwQs3ycYhXLkxVr+fTRNDqjYKIkzQshW6jsJeV2KnJbDd0P0bot6RRtfh3MvoujG292xYdoBCEGqlgOVJEnCSB0Kfrrt//ELo16H0eToVhFRo2wK7bQdbexa2mzbpMTOeOk6ANhd7FVqM4QUMGKkMrmDTiIRHWMwjKkePvSB9ZVzah1HKXkaXPfiErPdZG5JkT9lmT/fpxqP9VtnvLV2HuvXysrFlCS23iJ4osfWmsdO4hGc7FxEk+oQp065k5GHYftkkF3+kA26ZolTZAuW8QRe5GkgSY4E1tmDkcO4Auov0jszhoMxZNs32K/FwKLIF88Kut37Cs9oFbFTPmQKv1if4AS8z+PRIQZfzs2BQ2CppMtBdBOoB/Og/BMeOuMsPtIKexls27668Z2yF+tfYDAji+1DJ7qCwI9ZbxNVDVBsuy8blkSUNux3B8olYazFtlEGPR9E6U9gsn35hB6awdRG3bN/U5aCo9VzXfTmWK42Pr+tQMGDLHjhKtpvH9nPQ6glT3LrQG5Zvxs2eXiy3HUX71ZqW+astyCg22dl+aNAraUe9siMi/utlUCkQEy09dlaP9j3aGryBn88CD198WdKPZbsozS+h/OcKSgvLhka7d/hiNfJeOHjZ0TJJ8svnraVHeP2tj/Dex0fx/mfH8cbbn+CPyt9mTl9VRoMNYhQO3qA0+nqin83tPXx+4jxOfP8bTp65ii++nsDD1S0zl465fWmeA0nKS4KN50ZfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screencapture-joudo-tk-1502095912645imgurl\"\n        title=\"screencapture-joudo-tk-1502095912645imgurl\"\n        src=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/db1e01e4eeacaf107b21d5036725e6b6/07484/pic04.png\"\n        srcset=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/db1e01e4eeacaf107b21d5036725e6b6/78e79/pic04.png 265w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/db1e01e4eeacaf107b21d5036725e6b6/b6a9b/pic04.png 530w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/db1e01e4eeacaf107b21d5036725e6b6/07484/pic04.png 540w\"\n        sizes=\"(max-width: 540px) 100vw, 540px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1060px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/d56e1/pic05.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGElEQVQoz22R226DMAyG8/5vsifYdr1eVJp2se6m6lTaig4o5QwhB0L+JaRUBWrpkwP+HTs2ablEUTMw4/teQ6l+gv2ntYaQCuG1RBAXSAqK0uRQJsCYRN40yFiFrutBoqQ2wuqO/bZcUscpyHD8S+GHOfwod7GbZjxbwsTlk2tuq3EUFUdesUF0vhTw/GS46PcUY+tF2B1jc75i76e3WLZoZLjwcE6w+tph/b3H588BtBVIzZOqhsGOw47i0Q8wBxPdndLoa8pBtl6Al9c13j42eF9tzBwUspJCGj81/cDSmpYPRUmnFLiQT0V2GSNSSghhEaZoN4lZRiMNNU8z2+q12/BcNE+YF5wXJ5zzSYfPRPNuHUu9tX9ikmrJl5p5ggAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screencapture-54-222-128-207-1502096436141\"\n        title=\"screencapture-54-222-128-207-1502096436141\"\n        src=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/77672/pic05.png\"\n        srcset=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/78e79/pic05.png 265w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/b6a9b/pic05.png 530w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/77672/pic05.png 1060w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/d56e1/pic05.png 1130w\"\n        sizes=\"(max-width: 1060px) 100vw, 1060px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","excerpt":"前期准备 服务器安装 Docker 和 Docker Compose 参考教程：\nhttp://get.daocloud.io/#install-docker 没有服务器的可以在本地安装 Docker 或使用 DaoCloud 的胶囊主机, 能免费体验 12…","frontmatter":{"date":"08月07, 2017","title":"使用 Docker 部署 FlarumChina","tags":["Docker","Linux"]}}},"pageContext":{"slug":"/post/deploy-flarumchina-with-docker/","prev":{"slug":"/post/lodash/","title":"10 个可用 ES6 替代的 Lodash 特性"},"next":{"slug":"/post/vscode-icon-share/","title":"VSCode icon 分享"}}}}