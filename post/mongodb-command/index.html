<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8" /><meta httpEquiv="x-ua-compatible" content="ie=edge" /><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /><style data-href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/styles.e89283b2af650ff2ea3f.css" id="gatsby-global-css">.footer-module--footer--OoKls{font-size:.9em;line-height:1.8;padding:15px;text-align:center}body{margin:0;padding:0;color:#666;-webkit-text-size-adjust:none;transition:transform .2s cubic-bezier(.4,.01,.165,.99);-webkit-tap-highlight-color:transparent;font-family:Helvetica Neue,Arial,Hiragino Sans GB,STHeiti,Microsoft YaHei;-webkit-font-smoothing:antialiased;-webkit-overflow-scrolling:touch}body,html{width:100%;height:100%;font-size:16px}h1,h2,h3,h4,h5,h6{margin:0;padding:0}a,a:hover{color:#1976d2;text-decoration:none}ol,ul{padding:0}ul{margin-left:25px}*{box-sizing:border-box}code,pre{-webkit-font-smoothing:initial}table{margin-left:0;margin-right:0;margin-top:0;padding:0;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}td,th,thead{text-align:left}td,th{border:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}blockquote{padding:0 0 0 calc(.8125rem - 1px);margin:0 0 .8125rem;border-left:4px solid rgba(0,0,0,.13);color:rgba(0,0,0,.53)}.main-module--main--3Q4Am{max-width:1390px;padding:0 40px 0 290px}@media (max-width:1024px){.main-module--main--3Q4Am{width:100%;padding-left:115px}}@media (max-width:768px){.main-module--main--3Q4Am{padding:6px 20px 0;word-wrap:break-word}}@font-face{font-family:iconfont;font-display:block;src:url(data:application/font-woff2;charset=utf-8;base64,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) format("woff2"),url(/fonts/iconfont.woff) format("woff"),url(/fonts/iconfont.ttf) format("truetype"),url(/fonts/iconfont.svg#iconfont) format("svg"),url(/fonts/iconfont.eot) format("embedded-opentype")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}.icon-archive:before{content:"\e601"}.icon-user:before{content:"\e602"}.icon-rss-v:before{content:"\e603"}.icon-tags:before{content:"\e604"}.icon-home:before{content:"\e605"}.icon-search:before{content:"\e606"}.icon-mail:before{content:"\e609"}.icon-twitter-v:before{content:"\e60a"}.icon-linkedin:before{content:"\e60b"}.icon-stackoverflow:before{content:"\e60c"}.icon-github-v:before{content:"\e60d"}.icon-facebook:before{content:"\e60e"}.icon-right:before{content:"\e60f"}.icon-left:before{content:"\e610"}.icon-link:before{content:"\e611"}.icon-https:before{content:"\e612"}.sidebar-module--sidebar--3ZmBP{position:fixed;width:250px;height:100%;overflow:hidden;background:#202020;z-index:5}@media(max-width:1024px){.sidebar-module--sidebar--3ZmBP{width:75px}}@media(max-width:768px){.sidebar-module--sidebar--3ZmBP{position:relative;width:100%;height:44px;background-color:#3b5998}}.buttons-module--buttons--jmSMN{padding:0;list-style:none;margin-left:0;margin-top:0}.buttons-module--buttons--jmSMN li{height:44px;line-height:44px;font-size:16px}.buttons-module--buttons--jmSMN li a{padding-left:25px;color:#999;display:block;transition:color .2s cubic-bezier(.4,.01,.165,.99)}.buttons-module--buttons--jmSMN li a:hover{color:hsla(0,0%,60%,.8)}.buttons-module--buttons--jmSMN li a i{font-size:20px;text-align:center;width:25px;height:44px;margin-right:20px;font-style:normal;display:inline-block}.buttons-module--buttons--jmSMN li .buttons-module--inline--2Twv-{display:inline-block;width:40px}@media (max-width:1024px){.buttons-module--title--XFerc{display:none}}@media(max-width:768px){.buttons-module--buttons--jmSMN:nth-child(3){display:none}.buttons-module--buttons--jmSMN{display:flex}.buttons-module--buttons--jmSMN li{display:flex;flex:1;justify-content:center}.buttons-module--buttons--jmSMN li a{width:100%;padding:0;text-align:center}.buttons-module--buttons--jmSMN li a i{margin:0;color:#182543}.buttons-module--active--QFbLc{background:#243c6d}.buttons-module--buttons--jmSMN .buttons-module--active--QFbLc i{color:#fff}.buttons-module--title--XFerc{display:none}}.profile-module--profile--3Aw9j{padding:40px 0 10px}@media (max-width:768px){.profile-module--profile--3Aw9j{display:none}}.profile-module--avatar--3PojC{width:140px;height:140px;display:block;border-radius:70px;margin:0 auto}@media (max-width:1024px){.profile-module--avatar--3PojC{width:40px;height:40px}}@media (max-width:768px){.profile-module--avatar--3PojC{width:100px;height:100px}}.profile-module--title--9w03U{display:block;padding:10px 0;text-align:center;font-size:18px;color:#999}@media (max-width:1024px){.profile-module--title--9w03U{display:none}}:root{--dark:#282c34;--white:#fff;--comment:#b2b2b2;--keyword:#ef3b7d;--lineHighlight:#353b45;--primitive:#5a9bcf;--string:#8dc891;--variable:#d7deea;--boolean:#ff8b50;--punctuation:#88c6be;--tag:#fc929e;--function:#79b6f2;--className:#fac863;--method:#69c;--operator:#a77afe}.gatsby-highlight{font-family:source-code-pro,Menlo,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:.85rem;background:#282c34;background:var(--dark);color:#fff;color:var(--white);border-radius:5px;-moz-tab-size:1.5em;-o-tab-size:1.5em;tab-size:1.5em;position:relative}@media (max-width:480px){.gatsby-highlight{margin:0 -20px;border-radius:0}}.gatsby-highlight:before{position:absolute;top:0;right:20px;padding:1px 10px;font-size:12px;color:#444;font-weight:700;letter-spacing:.8px;text-transform:uppercase;border-radius:0 0 5px 5px;background:#ddd}@media (max-width:480px){.gatsby-highlight:before{background-color:transparent!important;color:hsla(0,0%,86.7%,.09804);top:10px;right:10px;padding:0;font-size:30px;line-height:30px}}.gatsby-highlight[data-language=javascript]:before,.gatsby-highlight[data-language=js]:before{content:"js";background:#f7df1e}.gatsby-highlight[data-language=jsx]:before{content:"jsx";background:#61dafb}.gatsby-highlight[data-language=graphql]:before{content:"GraphQL";background:#e10098;color:#fff;font-weight:400}.gatsby-highlight[data-language=html]:before{content:"html";background:#005a9c;color:#fff;font-weight:400}.gatsby-highlight[data-language=css]:before{content:"css";background:#ff9800;color:#fff;font-weight:400}.gatsby-highlight[data-language=shell]:before{content:"shell"}.gatsby-highlight[data-language=sh]:before{content:"sh"}.gatsby-highlight[data-language=bash]:before{content:"bash"}.gatsby-highlight[data-language=yaml]:before{content:"yaml";background:#ffa8df}.gatsby-highlight[data-language=markdown]:before{content:"md"}.gatsby-highlight[data-language=json5]:before,.gatsby-highlight[data-language=json]:before{content:"json";background:linen}.gatsby-highlight[data-language=diff]:before{content:"diff";background:#e6ffed}.gatsby-highlight[data-language=text]:before{content:"text";background:#fff}.gatsby-highlight[data-language=flow]:before{content:"flow";background:#e8bd36}.gatsby-highlight pre[class*=language-]{background-color:transparent;line-height:1.5;padding:20px;margin:.85rem 0;overflow:auto;-webkit-overflow-scrolling:touch}.gatsby-highlight pre code{display:block;float:left;min-width:100%;font-family:source-code-pro,Menlo,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace}.gatsby-highlight-code-line{background-color:#353b45;background-color:var(--lineHighlight);display:block;margin:0 -20px;padding:.125rem 20px}.token.attr-name{color:#ef3b7d;color:var(--keyword)}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#b2b2b2;color:var(--comment)}.token.constant,.token.deleted,.token.function-name,.token.property,.token.symbol{color:#5a9bcf;color:var(--primitive)}.token.boolean,.token.number{color:#ff8b50;color:var(--boolean)}.token.tag{color:#fc929e;color:var(--tag)}.token.string{color:#8dc891;color:var(--string)}.token.punctuation{color:#88c6be;color:var(--punctuation)}.token.builtin,.token.char,.token.inserted,.token.selector{color:var(--char)}.token.function{color:#79b6f2;color:var(--function)}.token.operator{color:#a77afe;color:var(--operator)}.token.entity,.token.url,.token.variable{color:#d7deea;color:var(--variable)}.token.attr-value{color:#8dc891;color:var(--string)}.token.keyword{color:#ef3b7d;color:var(--keyword)}.token.atrule,.token.class-name{color:#fac863;color:var(--className)}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.namespace{opacity:.7}.table-wrapper{margin-bottom:1.45rem;overflow-x:auto;-webkit-overflow-scrolling:touch}.intro-module--intro--1_pGE{background-color:#f6f9fa;color:#999;margin-bottom:0;padding:20px 30px;text-align:center;font-size:1.5rem;font-weight:400}.posts-module--article--1UcAD{padding:30px 0;border-top:1px solid #fff;border-bottom:1px solid #ddd}@media(max-width:768px){.posts-module--article--1UcAD{padding:10px 0}}.posts-module--article--1UcAD img{display:block;max-width:100%;padding:0;margin:0 auto}.posts-module--meta--1wXJx{float:right;font-size:.9em;color:#555;line-height:2;width:auto}@media(max-width:768px){.posts-module--meta--1wXJx{display:none}}.posts-module--content--1GXl3{word-wrap:break-word;line-height:1.8;-webkit-font-smoothing:antialiased}.posts-module--more--1rINp{margin:15px 0 0}@media(max-width:768px){.posts-module--more--1rINp{font-size:14px}}.posts-module--toc--2YsKF{float:right;max-width:260px;min-width:120px;padding:6px;margin:0 0 15px 20px;font-size:14px;border:1px solid #e2e2e2}.posts-module--toc--2YsKF:before{content:"文章目录";font-weight:700;border-bottom:1px solid #e2e2e2;display:block}.posts-module--toc--2YsKF>ul{margin:.5em .5em .5em 1.5em}.title-module--title--KwS0p{font-size:2em;font-weight:300;line-height:35px;margin-bottom:25px;color:#333}@media(max-width:768px){.title-module--title--KwS0p{font-size:1.8em}}@media(max-width:480px){.title-module--title--KwS0p{font-size:1.6em}}.title-module--title--KwS0p a{color:inherit;text-decoration:none}.title-module--title--KwS0p a:hover{color:#1976d2}.tag-module--tag--wLwSF{display:inline-block;font-size:14px;padding:0 15px;height:40px;line-height:40px;color:rgba(36,121,204,.8);border:1px solid rgba(36,121,204,.8);border-radius:4px;margin:0 15px 10px 0;text-decoration:none;transition:color .2s cubic-bezier(.4,.01,.165,.99),border .2s cubic-bezier(.4,.01,.165,.99)}</style><meta name="generator" content="Gatsby 3.3.1" /><title data-react-helmet>mongoDB 常用命令 | Raincal's Blog</title><meta data-react-helmet name="description" content="安装 mongoDB 官网下载安装（Windows 安装方法） 基础知识 集合——对应关系数据库中的表 文档——对应关系数据库中的行 启动数据库服务 定位到安装目录下的 bin 文件夹里后 如没有文件夹，需先创建，用于指定数据存放位置 开启一个客户端访问数据库 同样的 bin…" /><meta data-react-helmet property="og:title" content="mongoDB 常用命令" /><meta data-react-helmet property="og:description" content="安装 mongoDB 官网下载安装（Windows 安装方法） 基础知识 集合——对应关系数据库中的表 文档——对应关系数据库中的行 启动数据库服务 定位到安装目录下的 bin 文件夹里后 如没有文件夹，需先创建，用于指定数据存放位置 开启一个客户端访问数据库 同样的 bin…" /><meta data-react-helmet property="og:type" content="website" /><meta data-react-helmet name="twitter:card" content="summary" /><meta data-react-helmet name="twitter:creator" content="Raincal" /><meta data-react-helmet name="twitter:title" content="mongoDB 常用命令" /><meta data-react-helmet name="twitter:description" content="安装 mongoDB 官网下载安装（Windows 安装方法） 基础知识 集合——对应关系数据库中的表 文档——对应关系数据库中的行 启动数据库服务 定位到安装目录下的 bin 文件夹里后 如没有文件夹，需先创建，用于指定数据存放位置 开启一个客户端访问数据库 同样的 bin…" /><meta data-react-helmet name="keywords" content="mongoDB" /><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/rss.xml" /><link rel="sitemap" type="application/xml" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/sitemap.xml" /><link as="script" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/webpack-runtime-2dcd2296a0c510d5768b.js" /><link as="script" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/framework-44458f6db894f6a2b3e3.js" /><link as="script" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/app-55850feab0d8b528ea96.js" /><link as="script" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/commons-49365db7d4a26f7e8692.js" /><link as="script" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/component---theme-src-templates-post-template-jsx-27bf3499f5f2241bcd7b.js" /><link as="fetch" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/page-data/post/mongodb-command/page-data.json" crossOrigin="anonymous" /><link as="fetch" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/page-data/sq/d/3020019608.json" crossOrigin="anonymous" /><link as="fetch" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/page-data/sq/d/3128451518.json" crossOrigin="anonymous" /><link as="fetch" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/page-data/app-data.json" crossOrigin="anonymous" /></head><body><div id="___gatsby"><div style="outline: none;" tabIndex="-1" id="gatsby-focus-wrapper"><div><nav class="sidebar-module--sidebar--3ZmBP"><div class="profile-module--profile--3Aw9j"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgeDE9IjUwJSIgeTE9Ii0yNy45NjIlIiB4Mj0iNTAlIiB5Mj0iMTY0LjMzOSUiIGlkPSJhIj48c3RvcCBzdG9wLWNvbG9yPSIjM0E3QkQ1IiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iIzAwRDJGRiIgb2Zmc2V0PSIxMDAlIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgeDE9IjUwJSIgeTE9IjE3Mi43NiUiIHgyPSI1MCUiIHkyPSItNDIuODUxJSIgaWQ9ImIiPjxzdG9wIHN0b3AtY29sb3I9IiMzQTdCRDUiIG9mZnNldD0iMCUiLz48c3RvcCBzdG9wLWNvbG9yPSIjMDBEMkZGIiBvZmZzZXQ9IjEwMCUiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48ZyBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6Y29sb3IiIHN0cm9rZS13aWR0aD0iODAuMzE0IiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTM2OC4yMzggMzQxLjgwNmMwLTM2Ljk2My0zNy4zNDUtMTE0Ljg5MS0xMTIuMDM3LTIzMy43ODQtNzQuNjkyIDExOC44OTMtMTEyLjAzOCAxOTYuODIxLTExMi4wMzggMjMzLjc4NCIgc3Ryb2tlPSJ1cmwoI2EpIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bXVsdGlwbHkiLz48cGF0aCBkPSJNMTQ0LjE2MyAzNDEuNzM1YzAgNTUuNDQ1IDUwLjE2MSAxMDAuMzkyIDExMi4wMzggMTAwLjM5MmgwYzYxLjg3NiAwIDExMi4wMzctNDQuOTQ3IDExMi4wMzctMTAwLjM5MiIgc3Ryb2tlPSJ1cmwoI2IpIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bXVsdGlwbHkiLz48L2c+PC9zdmc+" alt="avatar" class="profile-module--avatar--3PojC" /></a><span class="profile-module--title--9w03U">Raincal's Blog</span></div><ul class="buttons-module--buttons--jmSMN"><li><a aria-label="首页" href="/"><i class="iconfont icon-home"></i><span class="buttons-module--title--XFerc">首页</span></a></li><li><a aria-label="归档" href="/archives/"><i class="iconfont icon-archive"></i><span class="buttons-module--title--XFerc">归档</span></a></li><li><a aria-label="标签" href="/tags/"><i class="iconfont icon-tags"></i><span class="buttons-module--title--XFerc">标签</span></a></li><li><a aria-label="关于" href="/about/"><i class="iconfont icon-user"></i><span class="buttons-module--title--XFerc">关于</span></a></li><li><a aria-label="友链" href="/links/"><i class="iconfont icon-link"></i><span class="buttons-module--title--XFerc">友链</span></a></li></ul><ul class="buttons-module--buttons--jmSMN"><li><a href="https://github.com/Raincal" title="GitHub" class="buttons-module--inline--2Twv-" target="_blank" rel="noopener noreferrer"><i class="iconfont icon-github-v"></i></a><a href="https://blog.raincal.com/rss.xml" title="RSS" class="buttons-module--inline--2Twv-" target="_blank" rel="noopener noreferrer"><i class="iconfont icon-rss-v"></i></a><a href="https://www.google.com/search?q=site%3Ablog.raincal.com" title="Search" class="buttons-module--inline--2Twv-" target="_blank" rel="noopener noreferrer"><i class="iconfont icon-search"></i></a></li></ul></nav><div class="main-module--main--3Q4Am"><article class="posts-module--article--1UcAD"><div class="posts-module--meta--1wXJx"><div>07月10, 2015</div></div><h1 class="title-module--title--KwS0p">mongoDB 常用命令</h1><div class="posts-module--content--1GXl3"><div class="blog-post-content"><h2 id="安装" style="position:relative;"><a href="#%E5%AE%89%E8%A3%85" aria-label="安装 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>安装</h2>
<p><a href="https://www.mongodb.org/">mongoDB 官网</a>下载安装（<a href="http://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/">Windows 安装方法</a>）</p>
<h2 id="基础知识" style="position:relative;"><a href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86" aria-label="基础知识 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>基础知识</h2>
<p>集合——对应关系数据库中的表</p>
<p>文档——对应关系数据库中的行</p>
<h2 id="启动数据库服务" style="position:relative;"><a href="#%E5%90%AF%E5%8A%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%8D%E5%8A%A1" aria-label="启动数据库服务 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>启动数据库服务</h2>
<p>定位到安装目录下的 bin 文件夹里后</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; mongod --dbpath ../data/db</code></pre></div>
<p>如没有<code class="language-text">data/db</code>文件夹，需先创建，<code class="language-text">dbpath</code>用于指定数据存放位置</p>
<!-- more -->
<h2 id="开启一个客户端访问数据库" style="position:relative;"><a href="#%E5%BC%80%E5%90%AF%E4%B8%80%E4%B8%AA%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93" aria-label="开启一个客户端访问数据库 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>开启一个客户端访问数据库</h2>
<p>同样的 bin 文件夹下执行</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; mongo</code></pre></div>
<p>默认连接至<code class="language-text">test</code>数据库</p>
<h2 id="显示帮助" style="position:relative;"><a href="#%E6%98%BE%E7%A4%BA%E5%B8%AE%E5%8A%A9" aria-label="显示帮助 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>显示帮助</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; help</code></pre></div>
<h2 id="显示所有数据库名称" style="position:relative;"><a href="#%E6%98%BE%E7%A4%BA%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E7%A7%B0" aria-label="显示所有数据库名称 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>显示所有数据库名称</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; show dbs</code></pre></div>
<h2 id="切换数据库" style="position:relative;"><a href="#%E5%88%87%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93" aria-label="切换数据库 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>切换数据库</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; use test</code></pre></div>
<h2 id="显示当前连接的数据库名称" style="position:relative;"><a href="#%E6%98%BE%E7%A4%BA%E5%BD%93%E5%89%8D%E8%BF%9E%E6%8E%A5%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E7%A7%B0" aria-label="显示当前连接的数据库名称 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>显示当前连接的数据库名称</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db</code></pre></div>
<h2 id="显示当前数据库所有集合" style="position:relative;"><a href="#%E6%98%BE%E7%A4%BA%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E6%89%80%E6%9C%89%E9%9B%86%E5%90%88" aria-label="显示当前数据库所有集合 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>显示当前数据库所有集合</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; show collections</code></pre></div>
<h2 id="显示数据库支持的方法" style="position:relative;"><a href="#%E6%98%BE%E7%A4%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E6%94%AF%E6%8C%81%E7%9A%84%E6%96%B9%E6%B3%95" aria-label="显示数据库支持的方法 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>显示数据库支持的方法</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.help()</code></pre></div>
<h2 id="显示集合支持的方法" style="position:relative;"><a href="#%E6%98%BE%E7%A4%BA%E9%9B%86%E5%90%88%E6%94%AF%E6%8C%81%E7%9A%84%E6%96%B9%E6%B3%95" aria-label="显示集合支持的方法 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>显示集合支持的方法</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.help()</code></pre></div>
<h2 id="创建集合" style="position:relative;"><a href="#%E5%88%9B%E5%BB%BA%E9%9B%86%E5%90%88" aria-label="创建集合 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>创建集合</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.createCollection(&quot;users&quot;)</code></pre></div>
<h2 id="插入操作-insert" style="position:relative;"><a href="#%E6%8F%92%E5%85%A5%E6%93%8D%E4%BD%9C-insert" aria-label="插入操作 insert permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>插入操作 insert</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.insert({&quot;name&quot;:&quot;kiinlam&quot;,&quot;age&quot;:28})</code></pre></div>
<h2 id="查询操作-find" style="position:relative;"><a href="#%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C-find" aria-label="查询操作 find permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>查询操作 find</h2>
<h3 id="查找所有文档" style="position:relative;"><a href="#%E6%9F%A5%E6%89%BE%E6%89%80%E6%9C%89%E6%96%87%E6%A1%A3" aria-label="查找所有文档 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>查找所有文档</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.find()</code></pre></div>
<h3 id="查找指定文档" style="position:relative;"><a href="#%E6%9F%A5%E6%89%BE%E6%8C%87%E5%AE%9A%E6%96%87%E6%A1%A3" aria-label="查找指定文档 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>查找指定文档</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.find({&quot;name&quot;:&quot;kiinlam&quot;})</code></pre></div>
<h3 id="查询一条" style="position:relative;"><a href="#%E6%9F%A5%E8%AF%A2%E4%B8%80%E6%9D%A1" aria-label="查询一条 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>查询一条</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.findOne({&quot;name&quot;:&quot;kiinlam&quot;})</code></pre></div>
<h3 id="大于gt" style="position:relative;"><a href="#%E5%A4%A7%E4%BA%8Egt" aria-label="大于gt permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>大于$gt</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.find({&quot;age&quot;:{$gt:22}})</code></pre></div>
<h3 id="大于等于gte" style="position:relative;"><a href="#%E5%A4%A7%E4%BA%8E%E7%AD%89%E4%BA%8Egte" aria-label="大于等于gte permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>大于等于$gte</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.find({&quot;age&quot;:{$gte:22}})</code></pre></div>
<h3 id="小于lt" style="position:relative;"><a href="#%E5%B0%8F%E4%BA%8Elt" aria-label="小于lt permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>小于$lt</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.find({&quot;age&quot;:{$lt:22}})</code></pre></div>
<h3 id="小于等于gte" style="position:relative;"><a href="#%E5%B0%8F%E4%BA%8E%E7%AD%89%E4%BA%8Egte" aria-label="小于等于gte permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>小于等于$gte</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.find({&quot;age&quot;:{$lte:22}})</code></pre></div>
<h3 id="不等于ne" style="position:relative;"><a href="#%E4%B8%8D%E7%AD%89%E4%BA%8Ene" aria-label="不等于ne permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>不等于$ne</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.find(&quot;age&quot;:{$ne:22})</code></pre></div>
<h3 id="或or" style="position:relative;"><a href="#%E6%88%96or" aria-label="或or permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>或$or</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.find({$or:[{&quot;name&quot;:&quot;kiinlam&quot;},{&quot;name&quot;:&quot;cheungkiinlam&quot;}]})</code></pre></div>
<h3 id="在集合中in" style="position:relative;"><a href="#%E5%9C%A8%E9%9B%86%E5%90%88%E4%B8%ADin" aria-label="在集合中in permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>在集合中$in</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.find(&quot;name&quot;:{$in:[&quot;kiinlam&quot;,&quot;cheungkiinlam&quot;]})</code></pre></div>
<h3 id="不在集合中nin" style="position:relative;"><a href="#%E4%B8%8D%E5%9C%A8%E9%9B%86%E5%90%88%E4%B8%ADnin" aria-label="不在集合中nin permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>不在集合中$nin</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.find(&quot;name&quot;:{$nin:[&quot;kiinlam&quot;,&quot;cheungkiinlam&quot;]})</code></pre></div>
<h3 id="正则查询" style="position:relative;"><a href="#%E6%AD%A3%E5%88%99%E6%9F%A5%E8%AF%A2" aria-label="正则查询 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>正则查询</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.find({&quot;name&quot;:/^k/,&quot;name&quot;:/m$/})</code></pre></div>
<h3 id="筛选查询where" style="position:relative;"><a href="#%E7%AD%9B%E9%80%89%E6%9F%A5%E8%AF%A2where" aria-label="筛选查询where permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>筛选查询$where</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 使用js function作为筛选条件
&gt; db.users.find({$where: function(){return this.name==&#39;kiinlam&#39;}})</code></pre></div>
<h3 id="限制查询数量-limit" style="position:relative;"><a href="#%E9%99%90%E5%88%B6%E6%9F%A5%E8%AF%A2%E6%95%B0%E9%87%8F-limit" aria-label="限制查询数量 limit permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>限制查询数量 limit</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.find({&quot;age&quot;:22}).limit(10)</code></pre></div>
<h2 id="更新操作-update" style="position:relative;"><a href="#%E6%9B%B4%E6%96%B0%E6%93%8D%E4%BD%9C-update" aria-label="更新操作 update permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>更新操作 update</h2>
<h3 id="指定文档全部更新，等于覆盖" style="position:relative;"><a href="#%E6%8C%87%E5%AE%9A%E6%96%87%E6%A1%A3%E5%85%A8%E9%83%A8%E6%9B%B4%E6%96%B0%EF%BC%8C%E7%AD%89%E4%BA%8E%E8%A6%86%E7%9B%96" aria-label="指定文档全部更新，等于覆盖 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>指定文档全部更新，等于覆盖</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.update({&quot;name&quot;:&quot;kiinlam&quot;}, {&quot;name&quot;:&quot;cheungkiinlam&quot;,&quot;age&quot;:27})</code></pre></div>
<h3 id="局部更新一：增量更新inc" style="position:relative;"><a href="#%E5%B1%80%E9%83%A8%E6%9B%B4%E6%96%B0%E4%B8%80%EF%BC%9A%E5%A2%9E%E9%87%8F%E6%9B%B4%E6%96%B0inc" aria-label="局部更新一：增量更新inc permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>局部更新一：增量更新$inc</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// age增加2，其他不变
&gt; db.users.update({&quot;name&quot;:&quot;kiinlam&quot;}, {$inc:{&quot;age&quot;:2}})</code></pre></div>
<h3 id="局部更新二：字段修改set" style="position:relative;"><a href="#%E5%B1%80%E9%83%A8%E6%9B%B4%E6%96%B0%E4%BA%8C%EF%BC%9A%E5%AD%97%E6%AE%B5%E4%BF%AE%E6%94%B9set" aria-label="局部更新二：字段修改set permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>局部更新二：字段修改$set</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// age改为20
&gt; db.users.update({&quot;name&quot;:&quot;kiinlam&quot;}, {$set:{&quot;age&quot;:20}})</code></pre></div>
<h3 id="新增更新：如果不存在，就新增一条" style="position:relative;"><a href="#%E6%96%B0%E5%A2%9E%E6%9B%B4%E6%96%B0%EF%BC%9A%E5%A6%82%E6%9E%9C%E4%B8%8D%E5%AD%98%E5%9C%A8%EF%BC%8C%E5%B0%B1%E6%96%B0%E5%A2%9E%E4%B8%80%E6%9D%A1" aria-label="新增更新：如果不存在，就新增一条 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>新增更新：如果不存在，就新增一条</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 第三个参数为true
&gt; db.users.update({&quot;name&quot;:&quot;kiinlam&quot;}, {$set:{&quot;age&quot;:18}}, true)</code></pre></div>
<h3 id="批量更新" style="position:relative;"><a href="#%E6%89%B9%E9%87%8F%E6%9B%B4%E6%96%B0" aria-label="批量更新 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>批量更新</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 如果匹配多条，默认只改第一条，将第四个参数设为true可全部更新
&gt; db.users.update({&quot;name&quot;:&quot;kiinlam&quot;}, {$set:{&quot;age&quot;:18}}, true, true)</code></pre></div>
<h2 id="保存操作-save" style="position:relative;"><a href="#%E4%BF%9D%E5%AD%98%E6%93%8D%E4%BD%9C-save" aria-label="保存操作 save permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>保存操作 save</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 插入新文档，如果不提供&quot;_id&quot;字段
&gt; db.users.save({&quot;name&quot;:&quot;kiinlam&quot;, &quot;age&quot;:28})
// 更新已存在的文档
&gt; db.users.save({&quot;_id&quot;:&quot;xxx&quot;,&quot;name&quot;:&quot;kiinlam&quot;, &quot;age&quot;:28})</code></pre></div>
<h2 id="删除操作-remove" style="position:relative;"><a href="#%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C-remove" aria-label="删除操作 remove permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>删除操作 remove</h2>
<p>删除操作不可恢复</p>
<h3 id="删除所有，但不删除索引" style="position:relative;"><a href="#%E5%88%A0%E9%99%A4%E6%89%80%E6%9C%89%EF%BC%8C%E4%BD%86%E4%B8%8D%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95" aria-label="删除所有，但不删除索引 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>删除所有，但不删除索引</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.remove({})</code></pre></div>
<h3 id="删除指定文档" style="position:relative;"><a href="#%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E6%96%87%E6%A1%A3" aria-label="删除指定文档 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>删除指定文档</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.remove({&quot;name&quot;:&quot;kiinlam&quot;})</code></pre></div>
<h3 id="删除一条指定文档，如果有多条结果" style="position:relative;"><a href="#%E5%88%A0%E9%99%A4%E4%B8%80%E6%9D%A1%E6%8C%87%E5%AE%9A%E6%96%87%E6%A1%A3%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%9C%89%E5%A4%9A%E6%9D%A1%E7%BB%93%E6%9E%9C" aria-label="删除一条指定文档，如果有多条结果 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>删除一条指定文档，如果有多条结果</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.remove({&quot;name&quot;:&quot;kiinlam&quot;}, true)</code></pre></div>
<p>完全删除集合，包括索引，应当使用<code class="language-text">drop</code></p>
<p>大量删除时，采用复制需要保留的文档到新集合，再用<code class="language-text">drop</code>删除集合。</p>
<h2 id="删除数据库" style="position:relative;"><a href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93" aria-label="删除数据库 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>删除数据库</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.dropDatabase()</code></pre></div>
<h2 id="删除集合" style="position:relative;"><a href="#%E5%88%A0%E9%99%A4%E9%9B%86%E5%90%88" aria-label="删除集合 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>删除集合</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.drop()</code></pre></div>
<h2 id="计数操作-count" style="position:relative;"><a href="#%E8%AE%A1%E6%95%B0%E6%93%8D%E4%BD%9C-count" aria-label="计数操作 count permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>计数操作 count</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.count()
&gt; db.users.count({&quot;age&quot;:29})</code></pre></div>
<h2 id="唯一值查询-distinct" style="position:relative;"><a href="#%E5%94%AF%E4%B8%80%E5%80%BC%E6%9F%A5%E8%AF%A2-distinct" aria-label="唯一值查询 distinct permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>唯一值查询 distinct</h2>
<h3 id="指定字段有多个相同时，只取一个，返回指定字段的值组合成的数组" style="position:relative;"><a href="#%E6%8C%87%E5%AE%9A%E5%AD%97%E6%AE%B5%E6%9C%89%E5%A4%9A%E4%B8%AA%E7%9B%B8%E5%90%8C%E6%97%B6%EF%BC%8C%E5%8F%AA%E5%8F%96%E4%B8%80%E4%B8%AA%EF%BC%8C%E8%BF%94%E5%9B%9E%E6%8C%87%E5%AE%9A%E5%AD%97%E6%AE%B5%E7%9A%84%E5%80%BC%E7%BB%84%E5%90%88%E6%88%90%E7%9A%84%E6%95%B0%E7%BB%84" aria-label="指定字段有多个相同时，只取一个，返回指定字段的值组合成的数组 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>指定字段有多个相同时，只取一个，返回指定字段的值组合成的数组</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.distinct(&quot;age&quot;)</code></pre></div>
<h2 id="分组操作-group" style="position:relative;"><a href="#%E5%88%86%E7%BB%84%E6%93%8D%E4%BD%9C-group" aria-label="分组操作 group permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分组操作 group</h2>
<p>按照<code class="language-text">age</code>进行分组操作，分组结果存放在<code class="language-text">user</code>中，值为对应<code class="language-text">age</code>的 name 值的数组</p>
<p><code class="language-text">key</code>：分组依据</p>
<p><code class="language-text">initial</code>：初始化函数，每个不同的 age 组共享同一个函数</p>
<p><code class="language-text">$reduce</code>： 第一个参数为当前文档，第二参数为前一次函数操作的累计对象，第一次为<code class="language-text">initial</code>对应的对象</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.group({
                    &quot;key&quot;: {&quot;age&quot;: true},
                    &quot;initial&quot;: {&quot;user&quot;: []},
                    &quot;$reduce&quot;: function(cur,prev){
                        prev.user.push(cur.name);
                    }
                })</code></pre></div>
<p>假设有数据如下：</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">{ &quot;_id&quot; : ObjectId(&quot;55910457607379845607d9e2&quot;), &quot;name&quot; : &quot;kiinlam&quot;, &quot;age&quot; : 29 }
{ &quot;_id&quot; : ObjectId(&quot;55910468607379845607d9e3&quot;), &quot;name&quot; : &quot;shadow&quot;, &quot;age&quot; : 26 }
{ &quot;_id&quot; : ObjectId(&quot;55910992607379845607d9e5&quot;), &quot;name&quot; : &quot;foo&quot;, &quot;age&quot; : 29 }
{ &quot;_id&quot; : ObjectId(&quot;55911fca607379845607d9e6&quot;), &quot;name&quot; : &quot;dd&quot;, &quot;age&quot; : 22 }
{ &quot;_id&quot; : ObjectId(&quot;55911fd3607379845607d9e7&quot;), &quot;name&quot; : &quot;mm&quot;, &quot;age&quot; : 22 }
{ &quot;_id&quot; : ObjectId(&quot;55911fdf607379845607d9e8&quot;), &quot;name&quot; : &quot;gg&quot;, &quot;age&quot; : 22 }
{ &quot;_id&quot; : ObjectId(&quot;55911feb607379845607d9e9&quot;), &quot;name&quot; : &quot;jj&quot;, &quot;age&quot; : 22 }
{ &quot;_id&quot; : ObjectId(&quot;55920545ff40738c1fd0a839&quot;), &quot;name&quot; : &quot;zz&quot;, &quot;age&quot; : 1 }</code></pre></div>
<p>分组结果为：</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">[
        {
                &quot;age&quot; : 29,
                &quot;user&quot; : [
                        &quot;kiinlam&quot;,
                        &quot;foo&quot;
                ]
        },
        {
                &quot;age&quot; : 26,
                &quot;user&quot; : [
                        &quot;shadow&quot;
                ]
        },
        {
                &quot;age&quot; : 22,
                &quot;user&quot; : [
                        &quot;dd&quot;,
                        &quot;mm&quot;,
                        &quot;gg&quot;,
                        &quot;jj&quot;
                ]
        },
        {
                &quot;age&quot; : 1,
                &quot;user&quot; : [
                        &quot;zz&quot;
                ]
        }
]</code></pre></div>
<h3 id="更多分组功能" style="position:relative;"><a href="#%E6%9B%B4%E5%A4%9A%E5%88%86%E7%BB%84%E5%8A%9F%E8%83%BD" aria-label="更多分组功能 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>更多分组功能</h3>
<p>可选参数: <code class="language-text">condition</code> 和 <code class="language-text">finalize</code>。</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">`condition` —— 过滤条件
`finalize` —— 函数，分组完成后执行</code></pre></div>
<p>过滤掉<code class="language-text">age</code>大于 22 的文档，增加属性标明分组中文档的数量</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.group({
                    &quot;key&quot;: {&quot;age&quot;: true},
                    &quot;initial&quot;: {&quot;user&quot;: []},
                    &quot;$reduce&quot;: function(cur,prev){
                        prev.user.push(cur.name);
                    },
                    &quot;condition&quot;: {&quot;age&quot;:{$lte:22}},
                    &quot;finalize&quot;: function(out){
                        out.count = out.user.length;
                    }
                })</code></pre></div>
<p>分组结果为：</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">[
        {
                &quot;age&quot; : 22,
                &quot;user&quot; : [
                        &quot;dd&quot;,
                        &quot;mm&quot;,
                        &quot;gg&quot;,
                        &quot;jj&quot;
                ],
                &quot;count&quot; : 4
        },
        {
                &quot;age&quot; : 1,
                &quot;user&quot; : [
                        &quot;zz&quot;
                ],
                &quot;count&quot; : 1
        }
]</code></pre></div>
<h2 id="mapreduce" style="position:relative;"><a href="#mapreduce" aria-label="mapreduce permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>mapReduce</h2>
<p><code class="language-text">map</code>：映射函数，内部调用<code class="language-text">emit(key,value)</code>，集合按照<code class="language-text">key</code>进行映射分组。</p>
<p><code class="language-text">reduce</code>：简化函数，对<code class="language-text">map</code>分组后的数据进行分组简化，<code class="language-text">reduce(key,value)</code>中的<code class="language-text">key</code>是<code class="language-text">emit</code>中的<code class="language-text">key</code>，而<code class="language-text">value</code>则是<code class="language-text">emit</code>分组结果的集合。</p>
<p><code class="language-text">mapReduce</code>：最后执行的函数，参数为<code class="language-text">map</code>、<code class="language-text">reduce</code>和一些可选参数。</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.mapReduce
function ( map , reduce , optionsOrOutString ){
    var c = { mapreduce : this._shortName , map : map , reduce : reduce };
    assert( optionsOrOutString , &quot;need to supply an optionsOrOutString&quot; )

    if ( typeof( optionsOrOutString ) == &quot;string&quot; )
        c[&quot;out&quot;] = optionsOrOutString;
    else
        Object.extend( c , optionsOrOutString );

    var raw = this._db.runCommand( c );
    if ( ! raw.ok ){
        __mrerror__ = raw;
        throw Error( &quot;map reduce failed:&quot; + tojson(raw) );
    }
    return new MapReduceResult( this._db , raw );

}</code></pre></div>
<p>创建<code class="language-text">map</code>函数</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">function (){
    emit(this.name,{count:1});
}</code></pre></div>
<p>创建<code class="language-text">reduce</code>函数</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">function (key,value){
    var result = {count:0};
    for(var i = 0; i &lt; value.length; i++){
        result.count += value[i].count;
    }
    return result;
}</code></pre></div>
<p>执行<code class="language-text">mapReduce</code>操作</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.mapReduce(map,reduce,{&quot;out&quot;:&quot;collection&quot;})</code></pre></div>
<p>假设有数据如下</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">{ &quot;_id&quot; : ObjectId(&quot;55910457607379845607d9e2&quot;), &quot;name&quot; : &quot;kiinlam&quot;, &quot;age&quot; : 29 }
{ &quot;_id&quot; : ObjectId(&quot;55910468607379845607d9e3&quot;), &quot;name&quot; : &quot;shadow&quot;, &quot;age&quot; : 26 }
{ &quot;_id&quot; : ObjectId(&quot;55910992607379845607d9e5&quot;), &quot;name&quot; : &quot;foo&quot;, &quot;age&quot; : 29 }
{ &quot;_id&quot; : ObjectId(&quot;55920545ff40738c1fd0a839&quot;), &quot;name&quot; : &quot;zz&quot;, &quot;age&quot; : 1 }
{ &quot;_id&quot; : ObjectId(&quot;55911fca607379845607d9e6&quot;), &quot;name&quot; : &quot;foo&quot;, &quot;age&quot; : 22 }
{ &quot;_id&quot; : ObjectId(&quot;55911fd3607379845607d9e7&quot;), &quot;name&quot; : &quot;foo&quot;, &quot;age&quot; : 22 }
{ &quot;_id&quot; : ObjectId(&quot;55911fdf607379845607d9e8&quot;), &quot;name&quot; : &quot;foo&quot;, &quot;age&quot; : 22 }
{ &quot;_id&quot; : ObjectId(&quot;55911feb607379845607d9e9&quot;), &quot;name&quot; : &quot;foo&quot;, &quot;age&quot; : 22 }</code></pre></div>
<p>输出结果</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">{
        &quot;result&quot; : &quot;collection&quot;,    // 存放最终结果的集合名
        &quot;timeMillis&quot; : 28,
        &quot;counts&quot; : {
                &quot;input&quot; : 8,    // 传入文档的次数
                &quot;emit&quot; : 8,    // emit函数被调用次数
                &quot;reduce&quot; : 1,    // reduce函数被调用次数
                &quot;output&quot; : 4    // 最后返回文档的个数
        },
        &quot;ok&quot; : 1
}</code></pre></div>
<p>查看集合<code class="language-text">collection</code>中的结果</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.collection.find()</code></pre></div>
<p>输出结果</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">{ &quot;_id&quot; : &quot;foo&quot;, &quot;value&quot; : { &quot;count&quot; : 5 } }
{ &quot;_id&quot; : &quot;kiinlam&quot;, &quot;value&quot; : { &quot;count&quot; : 1 } }
{ &quot;_id&quot; : &quot;shadow&quot;, &quot;value&quot; : { &quot;count&quot; : 1 } }
{ &quot;_id&quot; : &quot;zz&quot;, &quot;value&quot; : { &quot;count&quot; : 1 } }</code></pre></div>
<h2 id="游标" style="position:relative;"><a href="#%E6%B8%B8%E6%A0%87" aria-label="游标 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>游标</h2>
<p>游标只表示一个引用，并不是真正的执行，在需要的时候，通过 for 循环或<code class="language-text">next()</code>方法进行遍历读取，枚举结束后，游标销毁，不再返回数据。</p>
<p>申明一个游标</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; var list = db.collection.find()</code></pre></div>
<p>通过<code class="language-text">forEach</code>遍历游标</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; list.forEach(function(i){
      print(i._id);
  })</code></pre></div>
<p>输出结果</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">foo
kiinlam
shadow
zz</code></pre></div>
<p>或者通过<code class="language-text">next</code>遍历集合</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; var list = db.collection.find()
&gt; list.next()
{ &quot;_id&quot; : &quot;foo&quot;, &quot;value&quot; : { &quot;count&quot; : 5 } }
&gt; list.next()
{ &quot;_id&quot; : &quot;kiinlam&quot;, &quot;value&quot; : { &quot;count&quot; : 1 } }
&gt; list.next()
{ &quot;_id&quot; : &quot;shadow&quot;, &quot;value&quot; : { &quot;count&quot; : 1 } }
&gt; list.next()
{ &quot;_id&quot; : &quot;zz&quot;, &quot;value&quot; : { &quot;count&quot; : 1 } }
&gt; list.next()
2015-07-01T11:27:38.186+0800 E QUERY    Error: error hasNext: false
    at Error (&lt;anonymous&gt;)
    at DBQuery.next (src/mongo/shell/query.js:255:15)
    at (shell):1:6 at src/mongo/shell/query.js:255
&gt; list
&gt;</code></pre></div>
<h2 id="索引-ensureindex" style="position:relative;"><a href="#%E7%B4%A2%E5%BC%95-ensureindex" aria-label="索引 ensureindex permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>索引 ensureIndex</h2>
<h3 id="建立索引" style="position:relative;"><a href="#%E5%BB%BA%E7%AB%8B%E7%B4%A2%E5%BC%95" aria-label="建立索引 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>建立索引</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 1为升序，-1为降序
&gt; db.users.ensureIndex({&quot;name&quot;:1})</code></pre></div>
<h3 id="唯一索引" style="position:relative;"><a href="#%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95" aria-label="唯一索引 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>唯一索引</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.ensureIndex({&quot;name&quot;:1},{&quot;unique&quot;:true})</code></pre></div>
<h3 id="组合索引" style="position:relative;"><a href="#%E7%BB%84%E5%90%88%E7%B4%A2%E5%BC%95" aria-label="组合索引 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>组合索引</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.ensureIndex({&quot;name&quot;:1, &quot;age&quot;:-1})</code></pre></div>
<h3 id="查看索引" style="position:relative;"><a href="#%E6%9F%A5%E7%9C%8B%E7%B4%A2%E5%BC%95" aria-label="查看索引 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>查看索引</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.getIndexes()</code></pre></div>
<h3 id="按指定索引查询" style="position:relative;"><a href="#%E6%8C%89%E6%8C%87%E5%AE%9A%E7%B4%A2%E5%BC%95%E6%9F%A5%E8%AF%A2" aria-label="按指定索引查询 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>按指定索引查询</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.find({&quot;name&quot;:&quot;kiinlam&quot;}).hint({&quot;name&quot;:1,&quot;age&quot;:1})</code></pre></div>
<h3 id="删除索引" style="position:relative;"><a href="#%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95" aria-label="删除索引 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>删除索引</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 删除所有自定义索引
&gt; db.users.dropIndexes()
// 删除指定索引
&gt; db.users.dropIndex(&quot;name_1&quot;)</code></pre></div>
<h2 id="性能分析函数-explain" style="position:relative;"><a href="#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%87%BD%E6%95%B0-explain" aria-label="性能分析函数 explain permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>性能分析函数 explain</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; db.users.find().explain(&quot;executionStats&quot;)</code></pre></div>
<h2 id="主从数据库部署" style="position:relative;"><a href="#%E4%B8%BB%E4%BB%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E9%83%A8%E7%BD%B2" aria-label="主从数据库部署 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>主从数据库部署</h2>
<h3 id="创建主数据库-master" style="position:relative;"><a href="#%E5%88%9B%E5%BB%BA%E4%B8%BB%E6%95%B0%E6%8D%AE%E5%BA%93-master" aria-label="创建主数据库 master permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>创建主数据库 master</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; mongod --dbpath=XXX --master</code></pre></div>
<h3 id="创建从数据库-slave" style="position:relative;"><a href="#%E5%88%9B%E5%BB%BA%E4%BB%8E%E6%95%B0%E6%8D%AE%E5%BA%93-slave" aria-label="创建从数据库 slave permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>创建从数据库 slave</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 指定从数据库端口--port
// 指定主数据库源--source
&gt; mongod --dbpath=XXX --port=8888 --slave --source=127.0.0.1:27017</code></pre></div>
<h3 id="后期指定主数据库源" style="position:relative;"><a href="#%E5%90%8E%E6%9C%9F%E6%8C%87%E5%AE%9A%E4%B8%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E6%BA%90" aria-label="后期指定主数据库源 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>后期指定主数据库源</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; mongod --dbpath=XXX --port=8888 --slave
// 后期添加源
// 切换到local数据库
&gt; use local
// 在sources中加入源地址
&gt; db.sources.insert({&quot;host&quot;:&quot;127.0.0.1:27017&quot;})</code></pre></div>
<h2 id="副本集-replset" style="position:relative;"><a href="#%E5%89%AF%E6%9C%AC%E9%9B%86-replset" aria-label="副本集 replset permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>副本集 replSet</h2>
<p>该架构没有特定的主数据库，一个数据库宕机了，另一个数据库会顶上</p>
<h3 id="创建第一个数据库服务器" style="position:relative;"><a href="#%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%8D%E5%8A%A1%E5%99%A8" aria-label="创建第一个数据库服务器 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>创建第一个数据库服务器</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 需要指定集群名及下一个数据库地址
&gt; mongod --dbpath=XXX --port 2222 --replSet mySet/127.0.0.1:3333</code></pre></div>
<h3 id="创建第二个数据库服务器" style="position:relative;"><a href="#%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%BA%8C%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%8D%E5%8A%A1%E5%99%A8" aria-label="创建第二个数据库服务器 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>创建第二个数据库服务器</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; mongod --dbpath=XXX --port 3333 --replSet mySet/127.0.0.1:2222</code></pre></div>
<h3 id="初始化副本集" style="position:relative;"><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%89%AF%E6%9C%AC%E9%9B%86" aria-label="初始化副本集 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>初始化副本集</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 进入任一数据库的admin集合
&gt; mongo 127.0.0.1:2222/admin
// 执行初始化操作
&gt; db.runCommand({
                    &quot;replSetInitiate&quot;:{
                        &quot;_id&quot;:&quot;mySet&quot;,
                        &quot;members&quot;:[
                            {
                                &quot;_id&quot;:1,
                                &quot;host&quot;:&quot;127.0.0.1:2222&quot;
                            },
                            {
                                &quot;_id&quot;:2,
                                &quot;host&quot;:&quot;127.0.0.1:3333&quot;
                            }
                        ]
                    }
                })</code></pre></div>
<h3 id="仲裁服务器" style="position:relative;"><a href="#%E4%BB%B2%E8%A3%81%E6%9C%8D%E5%8A%A1%E5%99%A8" aria-label="仲裁服务器 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>仲裁服务器</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 启动仲裁服务器
&gt; mongod --dbpath=XXX --port 4444 --replSet mySet/127.0.0.1:2222
// 回到admin集合中添加仲裁服务器
&gt; mongo 127.0.0.1:2222/admin
&gt; rs.addArb(&quot;127.0.0.1:4444&quot;)
// 查看服务器集群状态
&gt; rs.status()</code></pre></div>
<h2 id="分片技术" style="position:relative;"><a href="#%E5%88%86%E7%89%87%E6%8A%80%E6%9C%AF" aria-label="分片技术 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分片技术</h2>
<p>将集合进行拆分，将拆分的数据均摊到几个分片上。</p>
<p>主要参与者：</p>
<ul>
<li>客户端</li>
<li>路由服务器 mongos</li>
<li>配置服务器</li>
<li>分片数据库实例</li>
</ul>
<h3 id="开启配置服务器-config" style="position:relative;"><a href="#%E5%BC%80%E5%90%AF%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%99%A8-config" aria-label="开启配置服务器 config permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>开启配置服务器 config</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; mongod --dbpath=XXX --port 2222</code></pre></div>
<h3 id="开启路由服务器-mongos" style="position:relative;"><a href="#%E5%BC%80%E5%90%AF%E8%B7%AF%E7%94%B1%E6%9C%8D%E5%8A%A1%E5%99%A8-mongos" aria-label="开启路由服务器 mongos permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>开启路由服务器 mongos</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 指定配置服务器
&gt; mongos --port 3333 --configdb=127.0.0.1:2222</code></pre></div>
<h3 id="开启分片数据库服务器-mongod" style="position:relative;"><a href="#%E5%BC%80%E5%90%AF%E5%88%86%E7%89%87%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%8D%E5%8A%A1%E5%99%A8-mongod" aria-label="开启分片数据库服务器 mongod permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>开启分片数据库服务器 mongod</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; mongod --dbpath=XXX --port 4444
&gt; mongod --dbpath=XXX --port 5555</code></pre></div>
<h3 id="服务配置" style="position:relative;"><a href="#%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE" aria-label="服务配置 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>服务配置</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 进入mongos数据库admin集合
&gt; mongo 127.0.0.1:3333/admin
// 添加分片服务器addshard
&gt; db.runCommand({
                    &quot;addshard&quot;:&quot;127.0.0.1:4444&quot;,
                    &quot;allowLocal&quot;:true
                })
&gt; db.runCommand({
                    &quot;addshard&quot;:&quot;127.0.0.1:5555&quot;,
                    &quot;allowLocal&quot;:true
                })
// 开启数据库test的分片功能enablesharding
&gt; db.runCommand({&quot;enablesharding&quot;:&quot;test&quot;})
// 指定集合中分片的片键users.name
&gt; db.runCommand({&quot;shardcollection&quot;:&quot;test.users&quot;,&quot;key&quot;:{&quot;name&quot;:1}})
// 在mongos中查看数据分片情况
&gt; use test
&gt; db.printShardingStatus()</code></pre></div>
<h2 id="运维" style="position:relative;"><a href="#%E8%BF%90%E7%BB%B4" aria-label="运维 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>运维</h2>
<p>运维通常会涉及到以下 4 个方面</p>
<ul>
<li>安装部署</li>
<li>状态监控</li>
<li>安全认证</li>
<li>备份和恢复</li>
</ul>
<h3 id="安装部署为-windows-服务" style="position:relative;"><a href="#%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E4%B8%BA-windows-%E6%9C%8D%E5%8A%A1" aria-label="安装部署为 windows 服务 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>安装部署为 windows 服务</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 指定日志路径，添加install参数
&gt; mongod --dbpath=XXX --logpath=XXX --port=2222 --install
// 启动服务
&gt; net start MongoDB</code></pre></div>
<h3 id="状态监控" style="position:relative;"><a href="#%E7%8A%B6%E6%80%81%E7%9B%91%E6%8E%A7" aria-label="状态监控 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>状态监控</h3>
<h4 id="静态统计" style="position:relative;"><a href="#%E9%9D%99%E6%80%81%E7%BB%9F%E8%AE%A1" aria-label="静态统计 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>静态统计</h4>
<p><em>db.stats()</em></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 查看单个数据库状态
&gt; db.stats()</code></pre></div>
<p><code class="language-text">stats</code>比较简单，可以参考<a href="http://www.cnblogs.com/xuegang/archive/2011/10/13/2209965.html">db.stats()</a>一文</p>
<p><em>db.serverStatus()</em></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 查看整个mongodb的状态
// 进入admin集合
&gt; mongo 127.0.0.1:2222/admin
// 查看状态
&gt; db.serverStatus()</code></pre></div>
<p><code class="language-text">serverStatus</code>的参数很多，可以参考<a href="http://www.cnblogs.com/xuegang/archive/2011/10/13/2210339.html">db.serverStatus()</a>一文</p>
<h4 id="实时统计" style="position:relative;"><a href="#%E5%AE%9E%E6%97%B6%E7%BB%9F%E8%AE%A1" aria-label="实时统计 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实时统计</h4>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; mongostat --port 2222</code></pre></div>
<h2 id="安全认证" style="position:relative;"><a href="#%E5%AE%89%E5%85%A8%E8%AE%A4%E8%AF%81" aria-label="安全认证 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>安全认证</h2>
<p><em>TODO</em></p>
<p>有点复杂，偷懒了，参考<a href="http://docs.mongodb.org/manual/security/">安全认证</a></p>
<h3 id="备份和恢复" style="position:relative;"><a href="#%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D" aria-label="备份和恢复 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>备份和恢复</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 备份test数据库到D:\mongodb\backup
&gt; mongodump --port 2222 -d test -o D:\mongodb\backup
// 恢复数据，drop表示恢复前删除原有数据
&gt; mongorestore --port 2222 -d test --drop D:\mongodb\backup</code></pre></div>
<hr>
<h2 id="参考资料" style="position:relative;"><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99" aria-label="参考资料 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>参考资料</h2>
<ul>
<li><a href="https://www.mongodb.org/">mongoDB</a></li>
<li><a href="http://docs.mongodb.org/manual/">MongoDB 文档</a></li>
<li><a href="http://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/">install-mongodb-on-windows</a></li>
<li><a href="http://www.cnblogs.com/huangxincheng/category/355399.html">8 天学通 MongoDB 系列</a></li>
</ul></div></div></article><nav style="line-height: 20px; border-bottom: 1px solid #ddd; padding: 20px 0; overflow: hidden; font-size: 14px;"><div><a style="float: left;" href="/post/launch-sublime-text-from-command-line/">« Mac OS 终端使用 subl 运行 Sublime Text 3</a><a style="float: right;" href="/post/lodash/">10 个可用 ES6 替代的 Lodash 特性 »</a></div></nav><div id="comment"></div><footer class="footer-module--footer--OoKls">© 2019 - Raincal's Blog - <a href="https://github.com/Raincal/gatsby-rocket-blog" target="_blank" rel="noopener noreferrer">博客源码</a><br />Powered by <a href="https://www.gatsbyjs.org" target="_blank" rel="noopener noreferrer">Gatsby</a> &amp; <a href="https://www.yuque.com" target="_blank" rel="noopener noreferrer">Yuque</a></footer></div></div></div><div id="gatsby-announcer" style="position: absolute; top: 0px; width: 1px; height: 1px; padding: 0px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0px;" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/post/mongodb-command/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-89682d879688fa46f48f.js"],"app":["/app-55850feab0d8b528ea96.js"],"component---theme-src-pages-404-mdx":["/component---theme-src-pages-404-mdx-88a25d13012cef9f7c77.js"],"component---theme-src-pages-about-mdx":["/component---theme-src-pages-about-mdx-a837e9cb5da06892b071.js"],"component---theme-src-pages-archives-jsx":["/component---theme-src-pages-archives-jsx-9b3113e2d2af6fe74bf2.js"],"component---theme-src-pages-links-mdx":["/component---theme-src-pages-links-mdx-5ea99bec7c57b5da9ad6.js"],"component---theme-src-pages-tags-jsx":["/component---theme-src-pages-tags-jsx-bc14fdbcd6a816bc603f.js"],"component---theme-src-templates-index-jsx":["/component---theme-src-templates-index-jsx-ccfb463f0a76c846bce3.js"],"component---theme-src-templates-post-template-jsx":["/component---theme-src-templates-post-template-jsx-27bf3499f5f2241bcd7b.js"],"component---theme-src-templates-tag-template-jsx":["/component---theme-src-templates-tag-template-jsx-fdfce7b2fb2a7abbb427.js"]};/*]]>*/</script><script src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/polyfill-89682d879688fa46f48f.js" noModule></script><script src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/component---theme-src-templates-post-template-jsx-27bf3499f5f2241bcd7b.js" async></script><script src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/commons-49365db7d4a26f7e8692.js" async></script><script src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/app-55850feab0d8b528ea96.js" async></script><script src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/framework-44458f6db894f6a2b3e3.js" async></script><script src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/webpack-runtime-2dcd2296a0c510d5768b.js" async></script></body></html>